/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var he=Object.defineProperty;var We=Object.getOwnPropertyDescriptor;var ze=Object.getOwnPropertyNames;var qe=Object.prototype.hasOwnProperty;var Je=(i,t)=>{for(var e in t)he(i,e,{get:t[e],enumerable:!0})},Qe=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ze(t))!qe.call(i,n)&&n!==e&&he(i,n,{get:()=>t[n],enumerable:!(s=We(t,n))||s.enumerable});return i};var Ge=i=>Qe(he({},"__esModule",{value:!0}),i);var vt={};Je(vt,{default:()=>fe});module.exports=Ge(vt);var Ye={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,t){console&&console[i]&&console[i].apply(console,t)}},I=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||Ye,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,s,n){return n&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new I(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new I(this.logger,t)}},E=new I,j=class{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);let n=this.observers[s].get(e)||0;this.observers[s].set(e,n+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[r,l]=o;for(let c=0;c<l;c++)r(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[r,l]=o;for(let c=0;c<l;c++)r.apply(r,[t,...s])})}};function Q(){let i,t,e=new Promise((s,n)=>{i=s,t=n});return e.resolve=i,e.reject=t,e}function Ae(i){return i==null?"":""+i}function Ze(i,t,e){i.forEach(s=>{t[s]&&(e[s]=t[s])})}var Xe=/###/g;function G(i,t,e){function s(r){return r&&r.indexOf("###")>-1?r.replace(Xe,"."):r}function n(){return!i||typeof i=="string"}let a=typeof t!="string"?t:t.split("."),o=0;for(;o<a.length-1;){if(n())return{};let r=s(a[o]);!i[r]&&e&&(i[r]=new e),Object.prototype.hasOwnProperty.call(i,r)?i=i[r]:i={},++o}return n()?{}:{obj:i,k:s(a[o])}}function Ne(i,t,e){let{obj:s,k:n}=G(i,t,Object);if(s!==void 0||t.length===1){s[n]=e;return}let a=t[t.length-1],o=t.slice(0,t.length-1),r=G(i,o,Object);for(;r.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),r=G(i,o,Object),r&&r.obj&&typeof r.obj[`${r.k}.${a}`]!="undefined"&&(r.obj=void 0);r.obj[`${r.k}.${a}`]=e}function _e(i,t,e,s){let{obj:n,k:a}=G(i,t,Object);n[a]=n[a]||[],s&&(n[a]=n[a].concat(e)),s||n[a].push(e)}function se(i,t){let{obj:e,k:s}=G(i,t);if(e)return e[s]}function et(i,t,e){let s=se(i,e);return s!==void 0?s:se(t,e)}function Be(i,t,e){for(let s in t)s!=="__proto__"&&s!=="constructor"&&(s in i?typeof i[s]=="string"||i[s]instanceof String||typeof t[s]=="string"||t[s]instanceof String?e&&(i[s]=t[s]):Be(i[s],t[s],e):i[s]=t[s]);return i}function F(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var tt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function st(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,t=>tt[t]):i}var me=class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){let e=this.regExpMap.get(t);if(e!==void 0)return e;let s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}},nt=[" ",",","?","!",";"],at=new me(20);function it(i,t,e){t=t||"",e=e||"";let s=nt.filter(o=>t.indexOf(o)<0&&e.indexOf(o)<0);if(s.length===0)return!0;let n=at.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`),a=!n.test(i);if(!a){let o=i.indexOf(e);o>0&&!n.test(i.substring(0,o))&&(a=!0)}return a}function ve(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[t])return i[t];let s=t.split(e),n=i;for(let a=0;a<s.length;){if(!n||typeof n!="object")return;let o,r="";for(let l=a;l<s.length;++l)if(l!==a&&(r+=e),r+=s[l],o=n[r],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<s.length-1)continue;a+=l-a+1;break}n=o}return n}function ne(i){return i&&i.indexOf("_")>0?i.replace("_","-"):i}var ae=class extends j{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,o=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure,r;t.indexOf(".")>-1?r=t.split("."):(r=[t,e],s&&(Array.isArray(s)?r.push(...s):typeof s=="string"&&a?r.push(...s.split(a)):r.push(s)));let l=se(this.data,r);return!l&&!e&&!s&&t.indexOf(".")>-1&&(t=r[0],e=r[1],s=r.slice(2).join(".")),l||!o||typeof s!="string"?l:ve(this.data&&this.data[t]&&this.data[t][e],s,a)}addResource(t,e,s,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,r=[t,e];s&&(r=r.concat(o?s.split(o):s)),t.indexOf(".")>-1&&(r=t.split("."),n=e,e=r[1]),this.addNamespaces(e),Ne(this.data,r,n),a.silent||this.emit("added",t,e,s,n)}addResources(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(let a in s)(typeof s[a]=="string"||Object.prototype.toString.apply(s[a])==="[object Array]")&&this.addResource(t,e,a,s[a],{silent:!0});n.silent||this.emit("added",t,e,s)}addResourceBundle(t,e,s,n,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},r=[t,e];t.indexOf(".")>-1&&(r=t.split("."),n=s,s=e,e=r[1]),this.addNamespaces(e);let l=se(this.data,r)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),n?Be(l,s,a):l={...l,...s},Ne(this.data,r,l),o.silent||this.emit("added",t,e,s)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(n=>e[n]&&Object.keys(e[n]).length>0)}toJSON(){return this.data}},Re={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,t,e,s,n){return i.forEach(a=>{this.processors[a]&&(t=this.processors[a].process(t,e,s,n))}),t}},Pe={},K=class extends j{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ze(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=E.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;let s=this.resolve(t,e);return s&&s.res!==void 0}extractFromKey(t,e){let s=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");let n=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,a=e.ns||this.options.defaultNS||[],o=s&&t.indexOf(s)>-1,r=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!it(t,s,n);if(o&&!r){let l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:a};let c=t.split(s);(s!==n||s===n&&this.options.ns.indexOf(c[0])>-1)&&(a=c.shift()),t=c.join(n)}return typeof a=="string"&&(a=[a]),{key:t,namespaces:a}}translate(t,e,s){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);let n=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:o,namespaces:r}=this.extractFromKey(t[t.length-1],e),l=r[r.length-1],c=e.lng||this.language,d=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){let y=e.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${y}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:`${l}${y}${o}`}return n?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:o}let p=this.resolve(t,e),u=p&&p.res,g=p&&p.usedKey||o,h=p&&p.exactUsedKey||o,m=Object.prototype.toString.apply(u),v=["[object Number]","[object Function]","[object RegExp]"],x=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject;if(C&&u&&(typeof u!="string"&&typeof u!="boolean"&&typeof u!="number")&&v.indexOf(m)<0&&!(typeof x=="string"&&m==="[object Array]")){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let y=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,u,{...e,ns:r}):`key '${o} (${this.language})' returned an object instead of string.`;return n?(p.res=y,p.usedParams=this.getUsedParamsDetails(e),p):y}if(a){let y=m==="[object Array]",L=y?[]:{},N=y?h:g;for(let S in u)if(Object.prototype.hasOwnProperty.call(u,S)){let _=`${N}${a}${S}`;L[S]=this.translate(_,{...e,joinArrays:!1,ns:r}),L[S]===_&&(L[S]=u[S])}u=L}}else if(C&&typeof x=="string"&&m==="[object Array]")u=u.join(x),u&&(u=this.extendTranslation(u,t,e,s));else{let y=!1,L=!1,N=e.count!==void 0&&typeof e.count!="string",S=K.hasDefaultValue(e),_=N?this.pluralResolver.getSuffix(c,e.count,e):"",Ue=e.ordinal&&N?this.pluralResolver.getSuffix(c,e.count,{ordinal:!1}):"",Le=N&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),W=Le&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${_}`]||e[`defaultValue${Ue}`]||e.defaultValue;!this.isValidLookup(u)&&S&&(y=!0,u=W),this.isValidLookup(u)||(L=!0,u=o);let He=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&L?void 0:u,z=S&&W!==u&&this.options.updateMissing;if(L||y||z){if(this.logger.log(z?"updateKey":"missingKey",c,l,o,z?W:u),a){let O=this.resolve(o,{...e,keySeparator:!1});O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[],ee=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ee&&ee[0])for(let O=0;O<ee.length;O++)q.push(ee[O]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(e.lng||this.language):q.push(e.lng||this.language);let Oe=(O,$,J)=>{let ke=S&&J!==u?J:He;this.options.missingKeyHandler?this.options.missingKeyHandler(O,l,$,ke,z,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(O,l,$,ke,z,e),this.emit("missingKey",O,l,$,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?q.forEach(O=>{let $=this.pluralResolver.getSuffixes(O,e);Le&&e[`defaultValue${this.options.pluralSeparator}zero`]&&$.indexOf(`${this.options.pluralSeparator}zero`)<0&&$.push(`${this.options.pluralSeparator}zero`),$.forEach(J=>{Oe([O],o+J,e[`defaultValue${J}`]||W)})}):Oe(q,o,W))}u=this.extendTranslation(u,t,e,p,s),L&&u===o&&this.options.appendNamespaceToMissingKey&&(u=`${l}:${o}`),(L||y)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,y?u:void 0):u=this.options.parseMissingKeyHandler(u))}return n?(p.res=u,p.usedParams=this.getUsedParamsDetails(e),p):u}extendTranslation(t,e,s,n,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});let c=typeof t=="string"&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),d;if(c){let u=t.match(this.interpolator.nestingRegexp);d=u&&u.length}let p=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,s.lng||this.language,s),c){let u=t.match(this.interpolator.nestingRegexp),g=u&&u.length;d<g&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&n&&n.res&&(s.lng=n.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var u=arguments.length,g=new Array(u),h=0;h<u;h++)g[h]=arguments[h];return a&&a[0]===g[0]&&!s.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${e[0]}`),null):o.translate(...g,e)},s)),s.interpolation&&this.interpolator.reset()}let r=s.postProcess||this.options.postProcess,l=typeof r=="string"?[r]:r;return t!=null&&l&&l.length&&s.applyPostProcessor!==!1&&(t=Re.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,n,a,o,r;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(s))return;let c=this.extractFromKey(l,e),d=c.key;n=d;let p=c.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));let u=e.count!==void 0&&typeof e.count!="string",g=u&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),h=e.context!==void 0&&(typeof e.context=="string"||typeof e.context=="number")&&e.context!=="",m=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);p.forEach(v=>{this.isValidLookup(s)||(r=v,!Pe[`${m[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(r)&&(Pe[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${n}" for languages "${m.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(x=>{if(this.isValidLookup(s))return;o=x;let C=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(C,d,x,v,e);else{let y;u&&(y=this.pluralResolver.getSuffix(x,e.count,e));let L=`${this.options.pluralSeparator}zero`,N=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(C.push(d+y),e.ordinal&&y.indexOf(N)===0&&C.push(d+y.replace(N,this.options.pluralSeparator)),g&&C.push(d+L)),h){let S=`${d}${this.options.contextSeparator}${e.context}`;C.push(S),u&&(C.push(S+y),e.ordinal&&y.indexOf(N)===0&&C.push(S+y.replace(N,this.options.pluralSeparator)),g&&C.push(S+L))}}let X;for(;X=C.pop();)this.isValidLookup(s)||(a=X,s=this.getResource(x,v,X,e))}))})}),{res:s,usedKey:n,exactUsedKey:a,usedLng:o,usedNS:r}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,s,n):this.resourceStore.getResource(t,e,s,n)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&typeof t.replace!="string",n=s?t.replace:t;if(s&&typeof t.count!="undefined"&&(n.count=t.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!s){n={...n};for(let a of e)delete n[a]}return n}static hasDefaultValue(t){let e="defaultValue";for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e===s.substring(0,e.length)&&t[s]!==void 0)return!0;return!1}};function ge(i){return i.charAt(0).toUpperCase()+i.slice(1)}var ie=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=E.create("languageUtils")}getScriptPartFromCode(t){if(t=ne(t),!t||t.indexOf("-")<0)return null;let e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=ne(t),!t||t.indexOf("-")<0)return t;let e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){let e=["hans","hant","latn","cyrl","cans","mong","arab"],s=t.split("-");return this.options.lowerCaseLng?s=s.map(n=>n.toLowerCase()):s.length===2?(s[0]=s[0].toLowerCase(),s[1]=s[1].toUpperCase(),e.indexOf(s[1].toLowerCase())>-1&&(s[1]=ge(s[1].toLowerCase()))):s.length===3&&(s[0]=s[0].toLowerCase(),s[1].length===2&&(s[1]=s[1].toUpperCase()),s[0]!=="sgn"&&s[2].length===2&&(s[2]=s[2].toUpperCase()),e.indexOf(s[1].toLowerCase())>-1&&(s[1]=ge(s[1].toLowerCase())),e.indexOf(s[2].toLowerCase())>-1&&(s[2]=ge(s[2].toLowerCase()))),s.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(s=>{if(e)return;let n=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(n))&&(e=n)}),!e&&this.options.supportedLngs&&t.forEach(s=>{if(e)return;let n=this.getLanguagePartFromCode(s);if(this.isSupportedCode(n))return e=n;e=this.options.supportedLngs.find(a=>{if(a===n)return a;if(!(a.indexOf("-")<0&&n.indexOf("-")<0)&&(a.indexOf("-")>0&&n.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===n||a.indexOf(n)===0&&n.length>1))return a})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!e)return t.default||[];let s=t[e];return s||(s=t[this.getScriptPartFromCode(e)]),s||(s=t[this.formatLanguageCode(e)]),s||(s=t[this.getLanguagePartFromCode(e)]),s||(s=t.default),s||[]}toResolveHierarchy(t,e){let s=this.getFallbackCodes(e||this.options.fallbackLng||[],t),n=[],a=o=>{o&&(this.isSupportedCode(o)?n.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(o=>{n.indexOf(o)<0&&a(this.formatLanguageCode(o))}),n}},ot=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],rt={1:function(i){return Number(i>1)},2:function(i){return Number(i!=1)},3:function(i){return 0},4:function(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},5:function(i){return Number(i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5)},6:function(i){return Number(i==1?0:i>=2&&i<=4?1:2)},7:function(i){return Number(i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},8:function(i){return Number(i==1?0:i==2?1:i!=8&&i!=11?2:3)},9:function(i){return Number(i>=2)},10:function(i){return Number(i==1?0:i==2?1:i<7?2:i<11?3:4)},11:function(i){return Number(i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3)},12:function(i){return Number(i%10!=1||i%100==11)},13:function(i){return Number(i!==0)},14:function(i){return Number(i==1?0:i==2?1:i==3?2:3)},15:function(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2)},16:function(i){return Number(i%10==1&&i%100!=11?0:i!==0?1:2)},17:function(i){return Number(i==1||i%10==1&&i%100!=11?0:1)},18:function(i){return Number(i==0?0:i==1?1:2)},19:function(i){return Number(i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3)},20:function(i){return Number(i==1?0:i==0||i%100>0&&i%100<20?1:2)},21:function(i){return Number(i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0)},22:function(i){return Number(i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3)}},lt=["v1","v2","v3"],ct=["v4"],Ee={zero:0,one:1,two:2,few:3,many:4,other:5};function dt(){let i={};return ot.forEach(t=>{t.lngs.forEach(e=>{i[e]={numbers:t.nr,plurals:rt[t.fc]}})}),i}var ye=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=E.create("pluralResolver"),(!this.options.compatibilityJSON||ct.includes(this.options.compatibilityJSON))&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=dt()}addRule(t,e){this.rules[t]=e}getRule(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(ne(t==="dev"?"en":t),{type:e.ordinal?"ordinal":"cardinal"})}catch(s){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,e);return this.shouldUseIntlApi()?s&&s.resolvedOptions().pluralCategories.length>1:s&&s.numbers.length>1}getPluralFormsOfKey(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,s).map(n=>`${e}${n}`)}getSuffixes(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,e);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort((n,a)=>Ee[n]-Ee[a]).map(n=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${n}`):s.numbers.map(n=>this.getSuffix(t,n,e)):[]}getSuffix(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=this.getRule(t,s);return n?this.shouldUseIntlApi()?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${n.select(e)}`:this.getSuffixRetroCompatible(n,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){let s=t.noAbs?t.plurals(e):t.plurals(Math.abs(e)),n=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));let a=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?`_plural_${n.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}shouldUseIntlApi(){return!lt.includes(this.options.compatibilityJSON)}};function Me(i,t,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=et(i,t,e);return!a&&n&&typeof e=="string"&&(a=ve(i,e,s),a===void 0&&(a=ve(t,e,s))),a}var be=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=E.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(e=>e),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});let e=t.interpolation;this.escape=e.escape!==void 0?e.escape:st,this.escapeValue=e.escapeValue!==void 0?e.escapeValue:!0,this.useRawValueToEscape=e.useRawValueToEscape!==void 0?e.useRawValueToEscape:!1,this.prefix=e.prefix?F(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?F(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?F(e.nestingPrefix):e.nestingPrefixEscaped||F("$t("),this.nestingSuffix=e.nestingSuffix?F(e.nestingSuffix):e.nestingSuffixEscaped||F(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=e.alwaysFormat!==void 0?e.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=(e,s)=>e&&e.source===s?(e.lastIndex=0,e):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,s,n){let a,o,r,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(h){return h.replace(/\$/g,"$$$$")}let d=h=>{if(h.indexOf(this.formatSeparator)<0){let C=Me(e,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,s,{...n,...e,interpolationkey:h}):C}let m=h.split(this.formatSeparator),v=m.shift().trim(),x=m.join(this.formatSeparator).trim();return this.format(Me(e,l,v,this.options.keySeparator,this.options.ignoreJSONStructure),x,s,{...n,...e,interpolationkey:v})};this.resetRegExp();let p=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,u=n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>c(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?c(this.escape(h)):c(h)}].forEach(h=>{for(r=0;a=h.regex.exec(t);){let m=a[1].trim();if(o=d(m),o===void 0)if(typeof p=="function"){let x=p(t,a,n);o=typeof x=="string"?x:""}else if(n&&Object.prototype.hasOwnProperty.call(n,m))o="";else if(u){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${t}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=Ae(o));let v=h.safeValue(o);if(t=t.replace(a[0],v),u?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=a[0].length):h.regex.lastIndex=0,r++,r>=this.maxReplaces)break}}),t}nest(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,a,o;function r(l,c){let d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;let p=l.split(new RegExp(`${d}[ ]*{`)),u=`{${p[1]}`;l=p[0],u=this.interpolate(u,o);let g=u.match(/'/g),h=u.match(/"/g);(g&&g.length%2===0&&!h||h.length%2!==0)&&(u=u.replace(/'/g,'"'));try{o=JSON.parse(u),c&&(o={...c,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${d}${u}`}return delete o.defaultValue,l}for(;n=this.nestingRegexp.exec(t);){let l=[];o={...s},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){let d=n[1].split(this.formatSeparator).map(p=>p.trim());n[1]=d.shift(),l=d,c=!0}if(a=e(r.call(this,n[1].trim(),o),o),a&&n[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=Ae(a)),a||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),a=""),c&&(a=l.reduce((d,p)=>this.format(d,p,s.lng,{...s,interpolationkey:n[1].trim()}),a.trim())),t=t.replace(n[0],a),this.regexp.lastIndex=0}return t}};function ut(i){let t=i.toLowerCase().trim(),e={};if(i.indexOf("(")>-1){let s=i.split("(");t=s[0].toLowerCase().trim();let n=s[1].substring(0,s[1].length-1);t==="currency"&&n.indexOf(":")<0?e.currency||(e.currency=n.trim()):t==="relativetime"&&n.indexOf(":")<0?e.range||(e.range=n.trim()):n.split(";").forEach(o=>{if(!o)return;let[r,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,"");e[r.trim()]||(e[r.trim()]=c),c==="false"&&(e[r.trim()]=!1),c==="true"&&(e[r.trim()]=!0),isNaN(c)||(e[r.trim()]=parseInt(c,10))})}return{formatName:t,formatOptions:e}}function V(i){let t={};return function(s,n,a){let o=n+JSON.stringify(a),r=t[o];return r||(r=i(ne(n),a),t[o]=r),r(s)}}var we=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=E.create("formatter"),this.options=t,this.formats={number:V((e,s)=>{let n=new Intl.NumberFormat(e,{...s});return a=>n.format(a)}),currency:V((e,s)=>{let n=new Intl.NumberFormat(e,{...s,style:"currency"});return a=>n.format(a)}),datetime:V((e,s)=>{let n=new Intl.DateTimeFormat(e,{...s});return a=>n.format(a)}),relativetime:V((e,s)=>{let n=new Intl.RelativeTimeFormat(e,{...s});return a=>n.format(a,s.range||"day")}),list:V((e,s)=>{let n=new Intl.ListFormat(e,{...s});return a=>n.format(a)})},this.init(t)}init(t){let s=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=s.formatSeparator?s.formatSeparator:s.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=V(e)}format(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return e.split(this.formatSeparator).reduce((r,l)=>{let{formatName:c,formatOptions:d}=ut(l);if(this.formats[c]){let p=r;try{let u=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},g=u.locale||u.lng||n.locale||n.lng||s;p=this.formats[c](r,g,{...d,...n,...u})}catch(u){this.logger.warn(u)}return p}else this.logger.warn(`there was no format function for ${c}`);return r},t)}};function pt(i,t){i.pending[t]!==void 0&&(delete i.pending[t],i.pendingCount--)}var Ce=class extends j{constructor(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=s,this.languageUtils=s.languageUtils,this.options=n,this.logger=E.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(s,n.backend,n)}queueLoad(t,e,s,n){let a={},o={},r={},l={};return t.forEach(c=>{let d=!0;e.forEach(p=>{let u=`${c}|${p}`;!s.reload&&this.store.hasResourceBundle(c,p)?this.state[u]=2:this.state[u]<0||(this.state[u]===1?o[u]===void 0&&(o[u]=!0):(this.state[u]=1,d=!1,o[u]===void 0&&(o[u]=!0),a[u]===void 0&&(a[u]=!0),l[p]===void 0&&(l[p]=!0)))}),d||(r[c]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(l)}}loaded(t,e,s){let n=t.split("|"),a=n[0],o=n[1];e&&this.emit("failedLoading",a,o,e),s&&this.store.addResourceBundle(a,o,s,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2;let r={};this.queue.forEach(l=>{_e(l.loaded,[a],o),pt(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{r[c]||(r[c]={});let d=l.loaded[c];d.length&&d.forEach(p=>{r[c][p]===void 0&&(r[c][p]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",r),this.queue=this.queue.filter(l=>!l.done)}read(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:s,tried:n,wait:a,callback:o});return}this.readingCalls++;let r=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){let p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(c&&d&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,s,n+1,a*2,o)},a);return}o(c,d)},l=this.backend[s].bind(this.backend);if(l.length===2){try{let c=l(t,e);c&&typeof c.then=="function"?c.then(d=>r(null,d)).catch(r):r(null,c)}catch(c){r(c)}return}return l(t,e,r)}prepareLoading(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof e=="string"&&(e=[e]);let a=this.queueLoad(t,e,s,n);if(!a.toLoad.length)return a.pending.length||n(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(t,e,s){this.prepareLoading(t,e,{},s)}reload(t,e,s){this.prepareLoading(t,e,{reload:!0},s)}loadOne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=t.split("|"),n=s[0],a=s[1];this.read(n,a,"read",void 0,void 0,(o,r)=>{o&&this.logger.warn(`${e}loading namespace ${a} for language ${n} failed`,o),!o&&r&&this.logger.log(`${e}loaded namespace ${a} for language ${n}`,r),this.loaded(t,o,r)})}saveMissing(t,e,s,n,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${s}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){let l={...o,isUpdate:a},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(t,e,s,n,l):d=c(t,e,s,n),d&&typeof d.then=="function"?d.then(p=>r(null,p)).catch(r):r(null,d)}catch(d){r(d)}else c(t,e,s,n,r,l)}!t||!t[0]||this.store.addResource(t[0],e,s,n)}}};function Te(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){let s=t[3]||t[2];Object.keys(s).forEach(n=>{e[n]=s[n]})}return e},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function $e(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function te(){}function ft(i){Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(e=>{typeof i[e]=="function"&&(i[e]=i[e].bind(i))})}var B=class extends j{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=$e(t),this.services={},this.logger=E,this.modules={external:[]},ft(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(){var t=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof e=="function"&&(s=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(typeof e.ns=="string"?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));let n=Te();this.options={...n,...this.options,...$e(e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);function a(d){return d?typeof d=="function"?new d:d:null}if(!this.options.isClone){this.modules.logger?E.init(a(this.modules.logger),this.options):E.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl!="undefined"&&(d=we);let p=new ie(this.options);this.store=new ae(this.options.resources,this.options);let u=this.services;u.logger=E,u.resourceStore=this.store,u.languageUtils=p,u.pluralResolver=new ye(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(u.formatter=a(d),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new be(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new Ce(a(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(g){for(var h=arguments.length,m=new Array(h>1?h-1:0),v=1;v<h;v++)m[v-1]=arguments[v];t.emit(g,...m)}),this.modules.languageDetector&&(u.languageDetector=a(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=a(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new K(this.services,this.options),this.translator.on("*",function(g){for(var h=arguments.length,m=new Array(h>1?h-1:0),v=1;v<h;v++)m[v-1]=arguments[v];t.emit(g,...m)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,s||(s=te),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return t.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return t.store[d](...arguments),t}});let l=Q(),c=()=>{let d=(p,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(u),s(p,u)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te,n=typeof t=="string"?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();let a=[],o=r=>{if(!r||r==="cimode")return;this.services.languageUtils.toResolveHierarchy(r).forEach(c=>{c!=="cimode"&&a.indexOf(c)<0&&a.push(c)})};n?o(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(r=>o(r)),this.services.backendConnector.load(a,this.options.ns,r=>{!r&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(r)})}else s(null)}reloadResources(t,e,s){let n=Q();return t||(t=this.languages),e||(e=this.options.ns),s||(s=te),this.services.backendConnector.reload(t,e,a=>{n.resolve(),s(a)}),n}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Re.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let e=0;e<this.languages.length;e++){let s=this.languages[e];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(t,e){var s=this;this.isLanguageChangingTo=t;let n=Q();this.emit("languageChanging",t);let a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(a(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve(function(){return s.t(...arguments)}),e&&e(l,function(){return s.t(...arguments)})},r=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);let c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||a(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{o(d,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?r(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(r):this.services.languageDetector.detect(r):r(t),n}getFixedT(t,e,s){var n=this;let a=function(o,r){let l;if(typeof r!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),p=2;p<c;p++)d[p-2]=arguments[p];l=n.options.overloadTranslationOptionHandler([o,r].concat(d))}else l={...r};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix=l.keyPrefix||s||a.keyPrefix;let u=n.options.keySeparator||".",g;return l.keyPrefix&&Array.isArray(o)?g=o.map(h=>`${l.keyPrefix}${u}${h}`):g=l.keyPrefix?`${l.keyPrefix}${u}${o}`:o,n.t(g,l)};return typeof t=="string"?a.lng=t:a.lngs=t,a.ns=e,a.keyPrefix=s,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let s=e.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;let o=(r,l)=>{let c=this.services.backendConnector.state[`${r}|${l}`];return c===-1||c===2};if(e.precheck){let r=e.precheck(this,o);if(r!==void 0)return r}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,t)&&(!n||o(a,t)))}loadNamespaces(t,e){let s=Q();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{s.resolve(),e&&e(n)}),s):(e&&e(),Promise.resolve())}loadLanguages(t,e){let s=Q();typeof t=="string"&&(t=[t]);let n=this.options.preload||[],a=t.filter(o=>n.indexOf(o)<0);return a.length?(this.options.preload=n.concat(a),this.loadResources(o=>{s.resolve(),e&&e(o)}),s):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";let e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new ie(Te());return e.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new B(t,e)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te,s=t.forkResourceStore;s&&delete t.forkResourceStore;let n={...this.options,...t,isClone:!0},a=new B(n);return(t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),["store","services","language"].forEach(r=>{a[r]=this[r]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},s&&(a.store=new ae(this.store.data,n),a.services.resourceStore=a.store),a.translator=new K(a.services,n),a.translator.on("*",function(r){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];a.emit(r,...c)}),a.init(n,e),a.translator.options=n,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},f=B.createInstance();f.createInstance=B.createInstance;var wt=f.createInstance,Ct=f.dir,St=f.init,xt=f.loadResources,Lt=f.reloadResources,Ot=f.use,kt=f.changeLanguage,At=f.getFixedT,w=f.t,Nt=f.exists,Pt=f.setDefaultNamespace,Et=f.hasLoadedNamespace,Mt=f.loadNamespaces,Tt=f.loadLanguages;var b=require("obsidian");var Se=require("obsidian");var De={addButton:"Add",addCssClass:{desc:"The name of the class you want to add to the canvas",title:"Add CSS Class"},addFilePath:{desc:"The filepath of the canvas you want to add a class to",filePath:"Filepath"},className:"Class Name",commands:{addCanvas:"Add a CSS Class to the active canvas",editCanvas:"Edit {{- name}} settings",quickSwitch:"Quick switch between workspace-leaf-content & body mode",removeCanvas:"Remove a CSS Class from the active canvas",switchToBodyMode:"Switch to body mode",switchToViewContentMode:"Switch to workspace-leaf-content mode"},error:{alreadyApplied:"This class is already applied to this canvas.",emptyValue:"This value can't be empty."},message:{quickSwitch:"Switched to {{- mode}} mode",switchedToBody:"Switched to body mode",switchedToViewContent:"Switched to workspace-leaf-content mode"},removeFromCanvas:"Removed {{- class}} from {{- canvas}}",renameCssClass:{desc:"The name of the class you want to rename",placeholder:"New name",title:"Rename CSS Class"},renameFilePath:{desc:"The new filepath of the canvas you want to rename",placeholder:"New Filepath",title:"Edit canvas filepath"},settings:{addButton:{class:"Button: Open open canvas settings",name:"Add button in the page header",quickSwitch:"Button: Quick switch between view modes"},alreadyApplied:"This class is already applied to this canvas.",appendMode:{bodyDesc:"Append the canvas to the body. Allow to export as an image with the canvas but can have some unexpected mode, notably when multiple files are open.",default:{desc:"The default mode to append the class to the canvas, including canvas-file and the data-canvas-path attribute, when the canvas is opened or created.",title:"Default appending mode"},desc:"Where to append the class into the canvas.",options:{body:"body",workspaceLeaf:"workspace-leaf-content"},title:"Append Mode",workspaceLeafDesc:"Append the canvas to the workspace-leaf-content. Keep the class when focus change but can't be exported with the image."},cancel:"Cancel",console:{desc:"Allows to better follow the additions/removals made by the plugin. Notice will display an Obsidian notification.",options:{error:"Error",log:"Log",none:"None",notice:"Notice",warn:"Warn"},title:"Log Level"},edit:{title:"Edit"},newCanvas:{addNewCanvas:"Add new Canvas"},newClass:{addingInfo:"Add a class to this canvas"},noClassAdded:"No class added yet.",remove:{title:"Remove"},save:"Save",useCommandsInfo:"Use the commands modal to add a canvas and a class."}};var Fe={addButton:"Ajouter",addCssClass:{desc:"Le nom de la classe que vous souhaitez ajouter au Canvas",title:"Ajouter une classe CSS"},addFilePath:{desc:"Le chemin du fichier du Canva auquel vous souhaitez ajouter une classe",filePath:"Chemin du fichier"},className:"Nom de la classe",commands:{addCanvas:"Ajouter une classe CSS au Canvas actif",editCanvas:"Modifier les param\xE8tres de {{- name}}",quickSwitch:"Quick switch entre body & workspace-leaf-content",removeCanvas:"Supprimer une classe CSS du Canvas actif",switchToBodyMode:"Passer au mode body",switchToViewContentMode:"Passer au mode workspace-leaf-content"},error:{alreadyApplied:"Cette classe est d\xE9j\xE0 appliqu\xE9e \xE0 ce Canvas.",emptyValue:"Nom de classe vide"},message:{quickSwitch:"Passage au mode : {{- mode}}",switchedToBody:"Passage au mode body",switchedToViewContent:"Passage au mode workspace-leaf-content"},removeFromCanvas:"Suppression de {{- class}} dans {{- canvas}}",renameCssClass:{desc:"Le nom de la classe que vous souhaitez renommer",placeholder:"Nouveau nom",title:"Renommer une classe CSS"},renameFilePath:{desc:"Le nouveau chemin du Canvas que vous souhaitez modifier",placeholder:"Nouveau chemin",title:"Modifier le chemin du Canvas"},settings:{addButton:{class:"Bouton : Ouvrir les param\xE8tres du canvas ouvert",name:"Ajouter un bouton dans le menu de titre",quickSwitch:"Bouton : Quick switch entre les modes de vues"},alreadyApplied:"Cette classe est d\xE9j\xE0 appliqu\xE9e \xE0 ce Canvas.",appendMode:{bodyDesc:"Ajoute le Canvas au body. Permet d'exporter le Canvas en tant qu'image mais peut avoir un comportement inattendu, notamment avec plusieurs fichiers ouverts.",default:{desc:"Le mode d'ajout par d\xE9faut de la classe au Canvas, incluant canvas-file et l'attribut data-canvas-path, lors de l'ouverture ou de la cr\xE9ation du Canvas.",title:"Le mode d'ajout par d\xE9faut"},desc:"O\xF9 ajouter la classe dans le Canvas.",options:{body:"body",workspaceLeaf:"workspace-leaf-content"},title:"Comportement d'ajout",workspaceLeafDesc:"Ajoute le Canvas au workspace-leaf-content. Conserve la classe lorsque le focus change mais ne peut pas \xEAtre export\xE9 avec l'image."},cancel:"Annuler",console:{desc:"Permet de mieux suivre les ajouts/suppressions effectu\xE9s par le plugin. Notice affichera une notification Obsidian.",options:{error:"Erreur",log:"Log",none:"Aucun",notice:"Notice",warn:"Avertissement"},title:"Niveau de log"},edit:{title:"Modifier"},newCanvas:{addNewCanvas:"Ajouter un nouveau Canvas"},newClass:{addingInfo:"Ajouter une classe"},noClassAdded:"Aucune classe ajout\xE9e.",remove:{title:"Supprimer"},save:"Sauvegarder",useCommandsInfo:"Utilisez la fen\xEAtre de commande pour ajouter un Canvas et une classe."}};var xe={fr:{translation:Fe},en:{translation:De}},oe=Object.keys(xe).find(i=>i.toLocaleLowerCase()==Se.moment.locale())?Se.moment.locale():"en";var M=(e=>(e.body="body",e.workspaceLeaf="workspace-leaf-content",e))(M||{}),Ve={canvasAdded:[],logLevel:"none",defaultAppendMode:"workspace-leaf-content",addButtonSetting:!1,addButtonSwitchView:!1};var Y=require("obsidian");var mt=f.t("addButton"),Ie=f.t("className"),re=class extends Y.Modal{constructor(e,s){super(e);this.onSubmit=s}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:f.t("addCssClass.title")}),new Y.Setting(e).setName(Ie).setDesc(f.t("addCssClass.desc")).addText(s=>s.setPlaceholder(Ie).onChange(async n=>{this.result=n})),new Y.Setting(e).addButton(s=>s.setButtonText(mt).onClick(async()=>{this.onSubmit(this.result.replace(/\W+/g,"-").toLowerCase()),this.close()}))}onClose(){let{contentEl:e}=this;e.empty()}};var R=require("obsidian");var D=class extends R.Modal{constructor(e,s,n,a){super(e);this.canvas=s,this.onSubmit=a,this.plugin=n}onClose(){let{contentEl:e}=this;e.empty()}onOpen(){let{contentEl:e}=this;e.empty(),this.modalEl.addClass("canvas-css-modal"),new R.Setting(e).setName(this.canvas.canvasPath.replace(".canvas","")).setHeading().addButton(a=>a.setCta().setButtonText(w("addCssClass.title")).setTooltip(w("settings.newClass.addingInfo")).onClick(async()=>{this.canvas.canvasClass.push(""),this.onOpen()}));let s=document.createDocumentFragment();s.createEl("p",{text:w("settings.appendMode.desc")});let n=s.createEl("ul");for(let a in M){let o=n.createEl("li");o.createEl("span",{text:M[a]}),o.createEl("span",{text:" - "});let r=a==="body"?w("settings.appendMode.bodyDesc"):w("settings.appendMode.workspaceLeafDesc");o.createEl("span",{text:r})}new R.Setting(e).setName(w("settings.appendMode.title")).setDesc(s).addDropdown(a=>{a.addOption("body",w("settings.appendMode.options.body")).addOption("workspace-leaf-content",w("settings.appendMode.options.workspaceLeaf")).setValue(this.canvas.appendMode).onChange(async o=>{this.canvas.appendMode=o})});for(let a in this.canvas.canvasClass)new R.Setting(e).setClass("no-info").addText(o=>{o.setValue(this.canvas.canvasClass[a]).onChange(async r=>{this.canvas.canvasClass[a]=r}),o.inputEl.setAttribute("value",a)}).addExtraButton(o=>o.setIcon("trash").setTooltip(w("settings.remove.title")).onClick(async()=>{let r=this.canvas.canvasClass.indexOf(a);this.canvas.canvasClass.splice(r,1),this.onOpen()}));new R.Setting(e).setClass("no-info").addButton(a=>a.setButtonText(w("settings.save")).setCta().onClick(async()=>{let o=e.querySelectorAll(".error");for(let d in o)o[d]instanceof HTMLElement&&o[d].classList.remove("error");let r=e.querySelectorAll(".tooltip");for(let d in r)r[d]instanceof HTMLElement&&r[d].remove();let l=this.canvas.canvasClass.filter(d=>d===""),c=this.canvas.canvasClass.filter((d,p)=>this.canvas.canvasClass.indexOf(d)!==p);if(l.length>0||c.length>0){for(let d of l)this.addToolTipError(d,"empty");for(let d of c)this.addToolTipError(d,"duplicate")}else this.onSubmit(this.canvas),this.close()})).addButton(a=>a.setButtonText(w("settings.cancel")).setWarning().onClick(async()=>{this.close()}))}addToolTipError(e,s){var c;let n="";s==="duplicate"?n=w("error.alreadyApplied"):s==="empty"&&(n=w("error.emptyValue"));let a=this.canvas.canvasClass.indexOf(e),o=this.contentEl.querySelector(`input[value="${a}"]`);if(!o)return;o.classList.add("error");let r=(c=o.parentElement)==null?void 0:c.createEl("div",{text:n,cls:"tooltip"});if(!r)return;let l=o.getBoundingClientRect();r.style.top=`${l.top+l.height+5}px`,r.style.left=`${l.left+l.width/2}px`,r.style.backgroundColor="var(--text-error)"}};var de=require("obsidian");var le=require("obsidian");function k(i,t){switch(t){case"warn":console.warn(i);break;case"error":console.error(i);break;case"log":console.log(i);break;case"notice":new le.Notice(i);break;default:break}}function je(i,t,e,s){T(i,t,s),H(i,t,e,!0)}function Z(i,t,e,s){for(let n of i)T(n,t,s),H(n,t,e,!0)}function T(i,t,e,s=!1){i&&activeDocument.body.classList.contains(i)&&(k(`Class of "${e}" : ${activeDocument.body.classList}`,t),activeDocument.body.classList.remove(i),k(`Removed ${i} from the body`,t)),activeDocument.body.classList.contains("canvas-file")&&activeDocument.body.getAttribute("data-canvas-path")&&s&&(activeDocument.body.removeAttribute("data-canvas-path"),activeDocument.body.classList.remove("canvas-file"))}function H(i,t,e,s=!1){e.forEach(n=>{i&&i.length>0&&n.view.containerEl.classList.contains(i)&&(n.view.containerEl.classList.remove(i),k(`Removed ${i} from the workspace-leaf-content`,t)),s&&n.view.containerEl.classList.contains("canvas-file")&&n.view.containerEl.getAttribute("data-canvas-path")&&(n.view.containerEl.classList.remove("canvas-file"),n.view.containerEl.removeAttribute("data-canvas-path"))})}function A(i,t,e,s){var o;let n=Array.isArray(s)?s:[s],a=(o=e.canvasAdded.find(r=>r.canvasPath===i))==null?void 0:o.canvasClass;if(t==="body"){k(`RELOADING canvas "${i}" in BODY MODE`,e.logLevel);let r=document.querySelector(`body:has(.canvas-file[data-canvas-path="${i}"])`),l=n.filter(c=>{var d,p;return c.view instanceof le.FileView&&((p=(d=c==null?void 0:c.view)==null?void 0:d.file)==null?void 0:p.path)===i});if(r||l){(!a||a.length===0)&&(U(null,i,t,e.logLevel,n),H(null,e.logLevel,n,!0),a=[]);for(let c of a)U(c,i,t,e.logLevel,l),H(c,e.logLevel,n,!0)}}else if(k(`RELOADING canvas "${i}" in VIEW-CONTENT MODE`,e.logLevel),!a||a.length===0)T(null,e.logLevel,i,!0),U(null,i,t,e.logLevel,n);else for(let r of a)T(r,e.logLevel,i,!0),U(r,i,t,e.logLevel,n)}function U(i,t,e,s,n){if(e==="body")activeDocument.body.classList.contains("canvas-file")||activeDocument.body.addClass("canvas-file"),(!activeDocument.body.getAttribute("data-canvas-path")||activeDocument.body.getAttribute("data-canvas-path")!==t)&&(activeDocument.body.setAttribute("data-canvas-path",t),activeDocument.body.setAttribute("data-canvas-path",t)),i&&i.length>0&&!activeDocument.body.classList.contains(i)&&(activeDocument.body.addClass(i),k(`Added ${i} to the body`,s));else for(let a of n)a.view.containerEl.classList.contains("canvas-file")||a.view.containerEl.addClass("canvas-file"),a.view.containerEl.getAttribute("data-canvas-path")||a.view.containerEl.setAttribute("data-canvas-path",t),i&&!a.view.containerEl.classList.contains(i)&&(a.view.containerEl.addClass(i),k(`Added ${i} to the workspace-leaf-content`,s))}var ce=class extends de.FuzzySuggestModal{constructor(e,s,n,a){super(e);this.plugin=s,this.settings=n,this.filepath=a}getItems(){var s;let e=(s=this.settings.canvasAdded.find(n=>n.canvasPath===this.filepath))==null?void 0:s.canvasClass;return e||[]}getItemText(e){return e}onChooseItem(e,s){let n=this.settings.canvasAdded.find(a=>a.canvasPath===this.filepath);if(n){let a=n.canvasClass.indexOf(e.toString());if(a>-1&&n.canvasClass.splice(a,1),n.canvasClass.length===0){let r=this.settings.canvasAdded.indexOf(n);r>-1&&this.settings.canvasAdded.splice(r,1)}this.plugin.saveSettings(),new de.Notice(w("removeFromCanvas",{class:e.toString(),canvas:this.filepath}));let o=this.plugin.getLeafByPath(this.filepath);je(e.toString(),this.settings.logLevel,o,this.filepath)}}};var P=require("obsidian");var Ke=require("obsidian"),ue=class extends Ke.AbstractInputSuggest{constructor(e,s,n,a){super(n,e);this.inputEl=e;this.onSubmit=a;this.plugin=s}renderSuggestion(e,s){s.setText(e)}getSuggestions(e){return this.plugin.app.vault.getFiles().filter(n=>n.extension==="canvas").filter(n=>n.name.toLowerCase().contains(e.toLowerCase())&&!this.plugin.settings.canvasAdded.find(a=>a.canvasPath===n.path)).map(n=>n.path)}selectSuggestion(e,s){this.onSubmit(e),this.inputEl.value=e,this.inputEl.focus(),this.inputEl.trigger("input"),this.close()}};var pe=class extends P.PluginSettingTab{constructor(e,s){super(e,s);this.plugin=s}display(){let{containerEl:e}=this;if(e.empty(),this.plugin.settings.canvasAdded.length===0){let s=document.createDocumentFragment();s.createEl("p",{text:f.t("settings.noClassAdded")}),s.createEl("p",{text:f.t("settings.useCommandsInfo")}),new P.Setting(e).setHeading().setDesc(s)}new P.Setting(e).setName(f.t("settings.console.title")).setDesc(f.t("settings.console.desc")).addDropdown(s=>{s.addOption("none",f.t("settings.console.options.none")).addOption("error",f.t("settings.console.options.error")).addOption("warn",f.t("settings.console.options.warn")).addOption("log",f.t("settings.console.options.log")).addOption("notice",f.t("settings.console.options.notice")).setValue(this.plugin.settings.logLevel).onChange(async n=>{this.plugin.settings.logLevel=n,await this.plugin.saveSettings()})}),new P.Setting(e).setName(f.t("settings.addButton.name")).setHeading(),new P.Setting(e).setDesc(f.t("settings.addButton.class")).addToggle(s=>{s.setValue(this.plugin.settings.addButtonSetting).onChange(async n=>{this.plugin.settings.addButtonSetting=n,await this.plugin.saveSettings()})}),new P.Setting(e).setDesc(f.t("settings.addButton.quickSwitch")).addToggle(s=>{s.setValue(this.plugin.settings.addButtonSwitchView).onChange(async n=>{this.plugin.settings.addButtonSwitchView=n,await this.plugin.saveSettings()})}),new P.Setting(e).setName(f.t("settings.appendMode.default.title")).setDesc(f.t("settings.appendMode.default.desc")).addDropdown(s=>{s.addOption("workspace-leaf-content",f.t("settings.appendMode.options.workspaceLeaf")).addOption("body",f.t("settings.appendMode.options.body")).setValue(this.plugin.settings.defaultAppendMode).onChange(async n=>{this.plugin.settings.defaultAppendMode=n;let a=this.plugin.getLeafOfCanvasNotInSettings();for(let o of a)A(o.view.file.path,n,this.plugin.settings,o);await this.plugin.saveSettings()})}),new P.Setting(e).addButton(s=>s.setButtonText(f.t("settings.newCanvas.addNewCanvas")).onClick(async()=>{let n={canvasPath:"",canvasClass:[],appendMode:this.plugin.settings.defaultAppendMode};this.plugin.settings.canvasAdded.push(n),await this.plugin.saveSettings(),this.display()}));for(let s of this.plugin.settings.canvasAdded)new P.Setting(e).setClass("canvas-css-class-title").addSearch(n=>{n.setValue(s.canvasPath),n.setPlaceholder("test"),new ue(n.inputEl,this.plugin,this.app,async a=>{s.canvasPath=a,await this.plugin.saveSettings()})}).setClass("canvas-css-class-title").addExtraButton(n=>n.setIcon("edit").setTooltip(f.t("settings.edit.title")).onClick(async()=>{let a=JSON.parse(JSON.stringify(s.canvasClass));new D(this.app,s,this.plugin,async o=>{s.canvasClass=o.canvasClass,await this.plugin.saveSettings();let r=a.filter(c=>!o.canvasClass.includes(c)),l=this.plugin.getLeafByPath(s.canvasPath);A(s.canvasPath,s.appendMode,this.plugin.settings,l),Z(r,this.plugin.settings.logLevel,l,s.canvasPath)}).open()})).addExtraButton(n=>n.setIcon("trash").setTooltip(f.t("settings.remove.title")).onClick(async()=>{let a=this.plugin.settings.canvasAdded.indexOf(s);this.plugin.settings.canvasAdded.splice(a,1),await this.plugin.saveSettings(),this.display()}))}};var fe=class extends b.Plugin{quickCreateSettings(e,s){let n=this.settings.canvasAdded.find(a=>a.canvasPath===e);return n||(n={canvasPath:e,canvasClass:[],appendMode:s},this.settings.canvasAdded.push({canvasPath:e,canvasClass:[],appendMode:s}),this.saveSettings()),n}convertOldSettings(){this.settings.canvasAdded&&(this.settings.canvasAdded.forEach(e=>{!e.appendMode||e.appendMode.length===0?e.appendMode=this.settings.defaultAppendMode:e.appendMode==="view-content"&&(e.appendMode="workspace-leaf-content")}),this.saveSettings())}getLeafOfCanvasNotInSettings(){let e=[];return this.app.workspace.iterateAllLeaves(s=>{var n;if(s.view instanceof b.FileView){if(((n=s.view.file)==null?void 0:n.extension)==="canvas"){let a=s.view;this.settings.canvasAdded.find(r=>{var l;return r.canvasPath===((l=a.file)==null?void 0:l.path)})||e.push(s)}}else return e}),k(`Found ${e.length} canvas leaves without settings`,this.settings.logLevel),e}getLeafByPath(e){let s=[];return this.app.workspace.iterateAllLeaves(n=>{var a;n.view instanceof b.FileView&&((a=n.view.file)==null?void 0:a.path)===e&&s.push(n)}),k(`Found ${s.length} leaves for ${e}`,this.settings.logLevel),s}addingCanvasClassToLeaf(e){var n;let s=(n=this.app.workspace.getActiveViewOfType(b.ItemView))==null?void 0:n.getViewType();if(!e){k("OPENED FILE IS NOT A CANVAS",this.settings.logLevel);for(let a of this.settings.canvasAdded)for(let o of a.canvasClass)T(o,this.settings.logLevel,void 0,!0);return}if(e&&e.extension==="canvas"&&s==="canvas"){k(`OPENED FILE ${e.path} IS A CANVAS ; ADDING CLASS`,this.settings.logLevel);let a=this.settings.canvasAdded.find(c=>c.canvasPath===e.path),o=this.getLeafByPath(e.path),r=a?a.appendMode:this.settings.defaultAppendMode;A(e.path,r,this.settings,o);let l=this.settings.canvasAdded.filter(c=>c.canvasPath!==e.path);for(let c of l)for(let d of c.canvasClass)(a?a.canvasClass.includes(d):!1)||(H(d,this.settings.logLevel,o),T(d,this.settings.logLevel,e.path))}else if(s!=="canvas"){let a=e?` ("${e.path}") `:" ";k(`OPENED FILE${a}IS NOT A CANVAS`,this.settings.logLevel);for(let o of this.settings.canvasAdded)for(let r of o.canvasClass)T(r,this.settings.logLevel,e==null?void 0:e.path,!0)}}async onload(){await this.loadSettings(),await f.init({lng:oe,fallbackLng:"en",resources:xe,returnNull:!1,returnEmptyString:!1}),console.log(`Loading ${this.manifest.name.replaceAll(" ","")} v${this.manifest.version} (language: ${oe})`),this.convertOldSettings(),this.addCommand({id:"add-canvas-css-class",name:f.t("commands.addCanvas"),checkCallback:e=>{let s=this.app.workspace.getActiveViewOfType(b.ItemView);if((s==null?void 0:s.getViewType())==="canvas"){if(!e){let n=s.file.path;new re(this.app,a=>{var c;let o=this.settings.canvasAdded.find(d=>d.canvasPath===n);o?o.canvasClass.includes(a)?new b.Notice(f.t("settings.alreadyApplied")):(o.canvasClass.push(a),this.settings.canvasAdded=this.settings.canvasAdded.map(d=>d.canvasPath===n?o:d)):this.settings.canvasAdded.push({canvasPath:n,canvasClass:[a],appendMode:this.settings.defaultAppendMode}),this.saveSettings();let r=(c=this.settings.canvasAdded.find(d=>d.canvasPath===n))==null?void 0:c.appendMode,l=this.getLeafByPath(n);U(a,n,r||this.settings.defaultAppendMode,this.settings.logLevel,l)}).open()}return!0}return!1}}),this.addCommand({id:"remove-canvas-css-class",name:f.t("commands.removeCanvas"),checkCallback:e=>{let s=this.app.workspace.getActiveViewOfType(b.ItemView);if((s==null?void 0:s.getViewType())==="canvas"){let n=s.file.path;return this.settings.canvasAdded.find(o=>o.canvasPath===n)?(e||new ce(this.app,this,this.settings,n).open(),!0):!1}return!1}}),this.addCommand({id:"switch-to-body-mode",name:f.t("commands.switchToBodyMode"),checkCallback:e=>{let s=this.app.workspace.getActiveViewOfType(b.ItemView);if((s==null?void 0:s.getViewType())==="canvas"){let n=s.file.path;if(!e){let a=this.quickCreateSettings(n,"body");a.appendMode="body",this.saveSettings(),new b.Notice(f.t("message.switchedToBody")),this.removeBodyButton(),this.removeWorkspaceButton(),this.addWorkspaceButton(s,n);let o=this.getLeafByPath(n);A(n,a.appendMode,this.settings,o)}return!0}return!1}}),this.addCommand({id:"switch-to-workspace-leaf-content-mode",name:f.t("commands.switchToViewContentMode"),checkCallback:e=>{let s=this.app.workspace.getActiveViewOfType(b.ItemView);if((s==null?void 0:s.getViewType())==="canvas"){let n=s.file.path;if(!e){let a=this.quickCreateSettings(n,"workspace-leaf-content");a.appendMode="workspace-leaf-content",this.saveSettings(),new b.Notice(f.t("message.switchedToViewContent")),this.removeBodyButton(),this.removeWorkspaceButton(),this.addButtonBodyView(s,n);let o=this.getLeafByPath(n);A(n,a.appendMode,this.settings,o)}return!0}return!1}}),this.addCommand({id:"quick-switch-mode",name:f.t("commands.quickSwitch"),checkCallback:e=>{let s=this.app.workspace.getActiveViewOfType(b.ItemView);if((s==null?void 0:s.getViewType())==="canvas"){let n=s.file.path;if(!e){let a=this.quickCreateSettings(n,this.settings.defaultAppendMode);a.appendMode=a.appendMode==="body"?"workspace-leaf-content":"body",this.saveSettings(),new b.Notice(f.t("message.quickSwitch",{mode:a.appendMode})),a.appendMode==="body"?(this.removeWorkspaceButton(),this.addButtonBodyView(s,n)):(this.removeBodyButton(),this.addWorkspaceButton(s,n));let o=this.getLeafByPath(n);A(n,a.appendMode,this.settings,o)}return!0}return!1}}),this.addCommand({id:"edit-canvas",name:"Edit canvas",checkCallback:e=>{let s=this.app.workspace.getActiveViewOfType(b.ItemView);if((s==null?void 0:s.getViewType())==="canvas"){let n=s.file.path;if(!e){let a=this.quickCreateSettings(n,this.settings.defaultAppendMode),o=JSON.parse(JSON.stringify(a.canvasClass));new D(this.app,a,this,r=>{a=r,this.saveSettings();let l=this.getLeafByPath(n),c=o.filter(d=>!r.canvasClass.includes(d));A(n,a.appendMode,this.settings,l),Z(c,this.settings.logLevel,l,n)}).open()}return!0}return!1}}),this.app.workspace.onLayoutReady(()=>{this.addingCanvasClassToLeaf(this.app.workspace.getActiveFile())}),this.registerEvent(this.app.workspace.on("active-leaf-change",e=>{let s=(e==null?void 0:e.view)instanceof b.FileView?e.view:null,n=s?s.file:null;if(this.addingCanvasClassToLeaf(n),document.querySelectorAll(".canvas-css-class-button").forEach(o=>{o.remove()}),(s==null?void 0:s.getViewType())==="canvas"&&(n==null?void 0:n.extension)==="canvas"&&(this.settings.addButtonSetting&&s.addAction("ratio",f.t("commands.editCanvas",{name:n.basename}),async()=>{let r=n.path;this.quickCreateSettings(r,this.settings.defaultAppendMode);let l=this.settings.canvasAdded.find(d=>d.canvasPath===r);if(!l)return;let c=JSON.parse(JSON.stringify(l.canvasClass));new D(this.app,l,this,async d=>{l=d,await this.saveSettings();let p=this.getLeafByPath(r),u=c.filter(g=>!d.canvasClass.includes(g));A(r,l.appendMode,this.settings,p),Z(u,this.settings.logLevel,p,r),l.appendMode==="body"?(this.removeWorkspaceButton(),this.addButtonBodyView(s,r)):(this.removeBodyButton(),this.addWorkspaceButton(s,r))}).open()}).addClass("canvas-css-class-button"),this.settings.addButtonSwitchView)){let o=n.path,r=this.settings.defaultAppendMode,l=this.settings.canvasAdded.find(c=>c.canvasPath===o);l&&(r=l.appendMode),r==="body"?this.addButtonBodyView(s,o):this.addWorkspaceButton(s,o)}})),this.addSettingTab(new pe(this.app,this))}removeBodyButton(){if(!this.settings.addButtonSwitchView)return;let e=document.querySelector(".switch-body-button");e&&e.remove()}removeWorkspaceButton(){if(!this.settings.addButtonSwitchView)return;let e=document.querySelector(".switch-workspace-button");e&&e.remove()}async addButtonBodyView(e,s){if(!this.settings.addButtonSwitchView)return;e.addAction("layout-template",f.t("commands.switchToBodyMode"),async()=>{let a=this.quickCreateSettings(s,"body");a.appendMode="body",await this.saveSettings();let o=this.getLeafByPath(s);A(s,a.appendMode,this.settings,o),this.removeBodyButton(),this.addWorkspaceButton(e,s)}).addClass("canvas-css-class-button","switch-body-button")}async addWorkspaceButton(e,s){if(!this.settings.addButtonSwitchView)return;e.addAction("table",f.t("commands.switchToViewContentMode"),async()=>{let a=this.quickCreateSettings(s,"workspace-leaf-content");a.appendMode="workspace-leaf-content",await this.saveSettings();let o=this.getLeafByPath(s);A(s,a.appendMode,this.settings,o),this.removeWorkspaceButton(),this.addButtonBodyView(e,s)}).addClass("canvas-css-class-button","switch-workspace-button")}onunload(){console.log(`Unloading ${this.manifest.name.replaceAll(" ","")} v${this.manifest.version} (language: ${oe})`)}async loadSettings(){this.settings=Object.assign({},Ve,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
