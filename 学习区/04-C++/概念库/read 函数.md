---
created time: 2024-06-24 21:10:13
updated time: 2024-06-24 21:10:15
dtype: æ¦‚å¿µ
subject: C++
tags:
  - review
dg-publish: true
banner: https://source.unsplash.com/900x1600/?tree
banner_icon: ğŸ§ 
---

# C++ ä¸­çš„ `read` å‡½æ•°

## æ¦‚å¿µ
`read` æ˜¯ C++ ä¸­ç”¨äºä»è¾“å…¥æµä¸­è¯»å–æ•°æ®çš„å‡½æ•°ã€‚ä¸ `get` æˆ– `getline` ä¸åŒï¼Œ`read` å‡½æ•°é€šå¸¸ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶çš„è¯»å–ï¼Œå®ƒä»è¾“å…¥æµä¸­è¯»å–æŒ‡å®šæ•°é‡çš„å­—èŠ‚ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨æä¾›çš„ç¼“å†²åŒºä¸­ã€‚

## æ¨¡æ¿
ä»¥ä¸‹æ˜¯ `read` å‡½æ•°çš„åŸºæœ¬ä½¿ç”¨æ¨¡æ¿ï¼š

```C++
#include <iostream>
#include <fstream>

int main() {
    char buffer[100];
    ifstream file("example.bin", ios::binary);
    if (!file) {
        cerr << "Unable to open file!" << endl;
        return 1;
    }

    // ä»æ–‡ä»¶ä¸­è¯»å–æœ€å¤š 100 ä¸ªå­—èŠ‚
    file.read(buffer, 100);
    if (!file) {
        cerr << "Read error occurred!" << endl;
        return 1;
    }

    // å¤„ç†è¯»å–çš„æ•°æ®
    // ...

    file.close();
    return 0;
}
```

## é‡ç‚¹
- **äºŒè¿›åˆ¶è¯»å–**ï¼š`read` é€šå¸¸ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶è¯»å–ã€‚
- **ç¼“å†²åŒº**ï¼šè¯»å–çš„æ•°æ®å­˜å‚¨åœ¨æä¾›çš„ç¼“å†²åŒºä¸­ã€‚
- **å­—èŠ‚æ•°**ï¼š`read` å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å­—ç¬¦æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯è¦è¯»å–çš„å­—èŠ‚æ•°ã€‚

## é«˜çº§ç”¨æ³•
`read` å‡½æ•°å¯ä»¥ä¸ `gcount` æˆå‘˜å‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ç¡®å®šå®é™…è¯»å–çš„å­—èŠ‚æ•°ï¼š

```C++
ifstream file("example.bin", ios::binary);
file.read(buffer, 100);
size_t bytesRead = file.gcount(); // è·å–å®é™…è¯»å–çš„å­—èŠ‚æ•°
```

## ä¾‹é¢˜

### ä¾‹é¢˜ 1ï¼šè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶

```C++
int main() {
    char buffer[100];
    ifstream file("example.bin", ios::binary);
    if (!file) {
        cerr << "Unable to open file!" << endl;
        return 1;
    }

    file.read(buffer, 100);
    if (!file) {
        cerr << "Read error occurred!" << endl;
        return 1;
    }

    // å¤„ç† buffer ä¸­çš„æ•°æ®
    // ...

    file.close();
    return 0;
}
```

## æ³¨æ„äº‹é¡¹

- **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨ `read` ååº”è¯¥æ£€æŸ¥æ–‡ä»¶æµçš„çŠ¶æ€ï¼Œä»¥ç¡®å®šè¯»å–æ˜¯å¦æˆåŠŸã€‚
- **è¯»å–å­—èŠ‚æ•°**ï¼š`read` å‡½æ•°è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ `gcount()` æ¥è·å–ã€‚
- **æµæ¨¡å¼**ï¼šå½“è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œç¡®ä¿ä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚

## æ€»ç»“

`read` å‡½æ•°æ˜¯ C++ ä¸­å¤„ç†äºŒè¿›åˆ¶æ•°æ®è¯»å–çš„é‡è¦å·¥å…·ã€‚å®ƒå…è®¸å¼€å‘è€…è¯»å–å›ºå®šæ•°é‡çš„å­—èŠ‚åˆ°å†…å­˜ä¸­ï¼Œé€‚åˆå¤„ç†éæ–‡æœ¬æ–‡ä»¶ã€‚æ­£ç¡®ä½¿ç”¨ `read` å‡½æ•°å¯¹äºå®ç°é«˜æ•ˆçš„äºŒè¿›åˆ¶ I/O æ“ä½œè‡³å…³é‡è¦ã€‚
