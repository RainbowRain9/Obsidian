---
命名: __2.5 关系演算
课程:
  - "[[第2章 关系数据库]]"
状态: 完成
创建时间: Invalid date
执行人: 蔡蔡鸿宇
时间安排: Invalid date
待解决问题: 待解决:[ 0 ]
created: 2025-03-29T21:52
updated: 2025-03-29T21:52
---
> [!important]

> [!important]

# 2.5 关系演算

关系演算是基于**谓词逻辑**的关系数据库查询方法，通过逻辑公式描述查询结果应满足的条件，而非显式指定操作步骤。其核心特点是**声明式**（描述“做什么”而非“如何做”）。关系演算分为两类：

---

## 2.5.1 元组关系演算

以**元组变量**为基础，描述满足条件的元组集合。

### 1. 基本语法

- **表达式形式**：$\{ t \mid P(t) \}$
    - `t`：元组变量
    - `P(t)`：谓词逻辑公式

### 2. 原子公式

- **形式**：
    - `t[A] θ c`（属性与常量比较）
    - `t[A] θ s[B]`（属性间比较）
    - `t ∈ R`（元组属于关系）
    - **θ**：比较运算符（如 `=`, `>`, `<`）

### 3. 量词

- **存在量词（∃）**：
    
    $\{ t \mid \exists s \in R \ (t[A] = s[B]) \}$
    
    **示例**：查询有学生选修的课程号
    
    $\{ t \mid \exists s \in SC \ (t[\text{Cno}] = s[\text{Cno}]) \}$
    
- **全称量词（∀）**：
    
    $\{ t \mid \forall s \in R \ (P(t, s)) \}$
    
    **示例**：查询选修了所有课程的学生
    
    $\{ t \mid \forall s \in Course \ \exists r \in SC \ (t[\text{Sno}] = r[\text{Sno}] \land r[\text{Cno}] = s[\text{Cno}]) \}$
    

### 4. 安全表达式

为避免无限结果，元组变量需限定在**有限关系范围内**。

**示例**：$\{ t \mid \lnot (t \in Student) \}$

若无范围限制，可能返回无限元组。

---

## 2.5.2 域关系演算

以**域变量**（属性值的变量）为基础，直接描述属性间的逻辑关系。

### 1. 基本语法

- $\{ \langle x_1, x_2, \dots, x_n \rangle \mid P(x_1, x_2, \dots, x_n) \}$
    - `x_i`：域变量（表示属性值）
    - `P`：谓词逻辑公式

### 2. 原子公式

- **形式**：
    - `⟨x₁, x₂⟩ ∈ R`（域变量组合属于关系）
    - `x θ y`（域变量间比较）

### 3. 示例

**查询计算机系学生姓名**：

$\{ \langle \text{Sname} \rangle \mid \exists \text{Sno}, \text{Sdept} \ (\langle \text{Sno}, \text{Sname}, \text{Sdept} \rangle \in \text{Student} \ \land \ \text{Sdept} = 'CS') \}$

---

## 2.5.3 关系演算与关系代数的等价性

### 1. 表达能力等价性

- **定理**：关系代数与安全的关系演算（元组/域）具有相同的表达能力。
- **证明**：
    1. 关系代数可转换为关系演算
    2. 安全的关系演算可转换为关系代数

### 2. 转换示例

**关系代数投影**：$\pi_{\text{Sname}}(\text{Student})$

**等价元组演算**：$\{ t \mid \exists s \in \text{Student} \ (t[\text{Sname}] = s[\text{Sname}]) \}$

---

## 2.5.4 实际应用

### 1. 查询语言设计基础

- **QBE（Query By Example）**：基于域关系演算的可视化查询语言**示例**：查询年龄大于20的学生
    
    |   |   |   |   |
    |---|---|---|---|
    |Sno|Sname|Sage|Sdept|
    |_|_|>20|_|
    

### 2. 与SQL的对应关系

|   |   |
|---|---|
|关系演算操作|SQL 语句|
|存在量词（∃）|`EXISTS` 子查询|
|全称量词（∀）|`NOT EXISTS` 嵌套否定|
|元组变量|表别名（如 `FROM Student s`）|

---

## 2.5.5 对比总结

|   |   |   |
|---|---|---|
|特性|元组关系演算|域关系演算|
|**变量类型**|元组变量|域变量（属性值）|
|**语法核心**|${ t \\| P(t) }$|${ ⟨x₁,x₂⟩ \\| P(x) }$|
|**直接操作对象**|元组|属性值|
|**表达能力**|与关系代数等价|与关系代数等价|
|**典型应用**|理论描述|QBE 查询语言|

---

关系演算为 SQL 提供了理论基础，其声明式特性使得用户只需关注结果条件，而无需指定具体操作步骤。